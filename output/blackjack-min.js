function drawCard(e){return e.deck.shift()}function calculateHand(e){let a=0;e.hand.forEach(e=>{a+=e.value}),e.score=a,checkAce(e)}function checkAce(e){for(let a=0;a<e.hand.length;a++)if(11==e.hand[a].value&&e.score>21){e.hand[a].value=1,e.score-=10;break}}function earlyCondition(e){if(21==e.score)return console.log("Black Jack "+e.name)}function winingCondition(e){for(let a=0;a<e.player.length;a++)e.player[a].hand.length>0&&1!=e.player[a].surended&&(e.dealer.score<=21&&e.player[a].score>e.dealer.score&&e.player[a].score<=21?(e.winnerList.push(e.player[a].name+" Won!"),e.player[a].balance+=2*e.player[a].bet):e.dealer.score<=21&&e.player[a].score==e.dealer.score&&e.player[a].score<=21?(e.winnerList.push(e.player[a].name+"Push!"),e.player[a].balance+=e.player[a].bet):e.player[a].score<=21&&e.player[a].score<e.dealer.score&&e.dealer.score<=21?e.winnerList.push("Dealer Wins! "+e.player[a].name+" Lose!"):e.player[a].score>21?e.winnerList.push(e.player[a].name+" Busted!"):e.dealer.score>21&&e.player[a].score<=21&&(e.winnerList.push("Dealer Busted! "+e.player[a].name+" Wins!"),e.player[a].balance+=2*e.player[a].bet),e.player[a].bet=0,console.log(e.player[a].name+e.player[a].balance))}exports.createDeck=function(e,a=10){let r=["Spades","Hearts","Diamonds","Clubs"],l=[11,2,3,4,5,6,7,8,9,10,10,10,10],n=["🂡","🂢","🂣","🂤","🂥","🂦","🂧","🂨","🂩","🂪","🂫","🂭","🂮","🂱","🂲","🂳","🂴","🂵","🂶","🂷","🂸","🂹","🂺","🂻","🂽","🂾","🃁","🃂","🃃","🃄","🃅","🃆","🃇","🃈","🃉","🃊","🃋","🃍","🃎","🃑","🃒","🃓","🃔","🃕","🃖","🃗","🃘","🃙","🃚","🃛","🃝","🃞"],t=1;for(;t<=a;){let a=0;for(let t=0;t<r.length;t++)for(let d=0;d<l.length;d++){let o=l[d];11==l[d]&&(o=1);var c={suit:r[t],value:l[d],unicode:"class='"+r[t]+"'>"+n[a],png:"/png/"+o+r[t][0]+".png"};e.deck.push(c),a++}t++}},exports.createPlayer=function(e,a,r,l,n,t){let c={id:a,socketid:r,hand:[],split:[],score:0,name:l,bet:0,balance:n,active:t,surended:!1};e.player.push(c)},exports.createDealer=function(e){e.dealer={hand:[],score:0,name:"Dealer",active:!1}},exports.shuffleDeck=function(e){e.deck.sort(function(e,a){return.5-Math.random()})},exports.deal=function(e){for(let a=0;a<e.player.length;a++)e.player[a].active&&(e.player[a].hand.push(drawCard(e)),e.player[a].hand.push(drawCard(e)),calculateHand(e.player[a]),earlyCondition(e.player[a]));e.dealer.hand.push(drawCard(e)),calculateHand(e.dealer),e.dealer.hand.push(drawCard(e))},exports.hit=function(e,a){let r;for(let l=0;l<e.player.length;l++)if(e.player[l].name===a){r=l;break}e.player[r].hand.push(drawCard(e)),calculateHand(e.player[r])},exports.stand=function(e,a){let r=0,l=0;for(let a=0;a<e.player.length;a++)e.player[a].hand.length>0&&(e.player[a].score>21&&r++,e.player[a].surended&&l++);let n=r+l;if(calculateHand(e.dealer),n!==a&&r!==a&&l!==a)for(;e.dealer.score<17;)e.dealer.hand.push(drawCard(e)),calculateHand(e.dealer);else calculateHand(e.dealer);winingCondition(e)};